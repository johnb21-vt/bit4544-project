{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block navbar %}
<nav class="navbar navbar-expand-lg" style="background-color: #142057;">
    <div class="container-fluid" style="color: white;">
        <a class="navbar-brand" href="#" style="color: white;">SMU Feedback Hub</a>
        <button style="color: white;" class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span style="color: white;" class="navbar-toggler-icon"></span>
        </button>
        <div style="color: white;" class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div style="color: white;" class="navbar-nav">
                <a style="font-weight: bold;" class="nav-link" aria-current="page" href="/instructor-portal">Instructor Portal</a>
                <a class="nav-link" href="/dashboard">Dashboard</a>
                <a class="nav-link" href="/">Logout</a>
            </div>
        </div>
    </div>
</nav>
{% endblock %}

{% block content %}

<style>
    .btn-outline-dark{
        color: black;
        border: black solid 1px;
    }

    .btn-primary{
        background-color: #142057;
        border: #142057;
        border-radius: 20px;
        width: 150px;
        height: 50px;
    }
    .btn-primary:hover{
        background-color: #0e173d;
        border: #0e173d;
    }
    
  .nav-link{
    color: white;
  }

  .nav-link:hover{
    color: gold;
  }

  #group-select{
    display: grid;
    grid-template-columns: 100px 100px 100px 100px 100px 100px / 100px 100px 100px 100px 100px;
    gap: 10px;
    /* grid-template-areas:
    'title title box box box box box'
    'title title box box box box box'
    'add remove box box box box'
    'add remove box box box box'
    'add remove box box box box'; */
  }

  #box{
    grid-column: 3 / 7;
    grid-row: 1 / 7;
  }

  #add-groups{
    grid-column: 1 / 3;
    grid-row: 1 / 7;
    flex-direction: column;
  }

  /* #title{
    grid-column: 1 / 3;
    grid-row: 1 / 3;
  }

  #add{
    grid-column: 1 / 2;
    grid-row: 4 / 7;
  }

  #remove{
    grid-column: 2 / 3;
    grid-row: 4 / 7;
  }*/

  #group-students{
    display: grid;
    grid-template-columns: 400px 400px 400px / 800px;
    gap: 10px;
    /* grid-template-areas:
    'title title box box box box box'
    'title title box box box box box'
    'add remove box box box box'
    'add remove box box box box'
    'add remove box box box box'; */
  }

  #students{
    grid-column: 1 / 2;
    grid-row: 1 / 1;
  }

  #add-students{
    grid-column: 2 / 3;
    grid-row: 1 / 1;
  }

  #group{
    grid-column: 3 / 4;
    grid-row: 1 / 1;
  }
</style>

<script>
    document.addEventListener("DOMContentLoaded", init)

    function init(){
        var x = document.getElementById("offering");
        x.addEventListener("change", getProducts)
    }

    function getProducts(){
        var selectedID = document.getElementById('offering').value;
        console.log(selectedID);

        fetch("/course-students?ofid=" + selectedID,
        {
            method: "GET"
        }).then(response => response.text()).then(data => {
            document.getElementById("placeholder").innerHTML = data;
        }).catch(error => {console.log(error);})
    }
</script>

<h1 style="margin: 25px 0 0 25px;">Create Student Groups</h1>

<form method="POST">
    <div style="display: flex; align-items: center; justify-content: center;">
        <div style="padding: 25px; color: black; border: black 2px solid; border-radius: 20px; margin: 50px 0;" id="grid-container">
            <div style="display: flex; justify-content: center; margin: 25px; gap: 10px">
                <label for="offering">Select Course Offering: </label>
                <select name="offering" id="offering">
                    {% for offering in offerings %}
                    <option value="{{ offering['offering_id'] }}">{{ offering['offering_id'] }} {{ offering['course_name'] }}</option>
                    {% endfor %}
                </select>
            </div>

            <div id="group-select">
                <div style="display: flex; justify-content: center; align-items: center; margin: 25px; gap: 10px;" id="add-groups">
                    <p style="align-self: center; justify-self: center;" id="title">Add or Select a Group</p>
                    <div>
                        <button id="add" class="btn btn-primary" style="font-size: 25px; font-weight: bold;">+</button>
                        <button id="remove" class="btn btn-primary" style="font-size: 25px; font-weight: bold;">-</button>
                    </div>
                </div>
                <div style="height: 200px; width: 300px; border: black 2px solid; border-radius: 20px; align-self: center; justify-self: center; background-color:#e9e9e9" id="box">

                </div>
            </div>

            <div style="display: flex; align-items: center; margin: 25px 0; gap: 10px;">
                <label for="year" style="margin: 25px 0 0 10px;">Search: </label>
                <input type="text" name="year" id="year" placeholder="Search students" style="padding: 10px 25px; margin: 25px 0 0 10px;">
            </div>

            <div id="group-students">
                <div style="height: 200px; width: 300px; border: black 2px solid; border-radius: 20px; align-self: center; justify-self: center; background-color:#e9e9e9" id="students">

                </div>
                <div style="display: flex; flex-direction:column; justify-content: center; align-items: center; margin: 25px; gap: 10px;" id="add-students">
                        <button id="add" class="btn btn-primary">Add <img src="{{ url_for('static', filename='images/add.png') }}" style="height: 20px; width: 20px; margin: 0 0 0 5px;"></button>
                        <button id="add" class="btn btn-primary"><img src="{{ url_for('static', filename='images/remove.png') }}" style="height: 20px; width: 20px; margin: 0 5px 0 0;"> Remove</button>
                </div>
                <div style="height: 200px; width: 300px; border: black 2px solid; border-radius: 20px; align-self: center; justify-self: center; background-color:#e9e9e9" id="group">

                </div>
            </div>
            <div id="placeholder"></div>
            <div style="display: flex; justify-content: center; margin: 25px 0 0 0; text-align:center;">
                <div style="height: auto; width:200px;">
                    <button type="submit" class="btn btn-primary" style="margin-bottom: 25px; margin-top: 25px;">Finish</button>
                </div>
            </div>
        </div>
    </div>
</form>
{% endblock %}